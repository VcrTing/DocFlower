webpackJsonp([2],{"1Qta":function(e,t,n){"use strict";var r,s=n("Xxa5"),a=n.n(s),u=n("exGp"),i=n.n(u),o=n("//Fk"),c=n.n(o),d=n("Mh3b"),_=n("DBJ4"),l=_.a.NAMESPACE,v=_.a.CAN_USER_PV_LIMIT,f=_.a.ACTIVE_MEMBER_NUM,m=_.a.ACTIVE_USD,h=function(e){return d.a.numd_pv(e)},p=function(e,t,n){var r=Math.floor(e.length/t);return d.a.floatMul(n,r)},b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.children,s=0,a=[];return new c.a(function(u,i){if(d.a.judge_has_children(e,r)){var o=e[r];d.a.judge_number(o.length,t)&&o.map(function(e){if(d.a.judge_number(h(e),n)&&d.a.judge_has_children(e,r)){var u=[];e[r].map(function(e){s=h(e),d.a.judge_number(s,n)&&u.push(s)}),d.a.judge_number(u.length,t)&&a.push(u)}})}u(a)})},x=(r=i()(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,f,v);case 2:return n=e.sent,r=p(n,f,m),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)});t.a=x},"7qUZ":function(e,t,n){"use strict";var r={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"loading"})},staticRenderFns:[]};var s=n("VU/8")({name:"LoadingSmall"},r,!1,function(e){n("acM9")},"data-v-aaa72676",null);t.a=s.exports},Gu7T:function(e,t,n){"use strict";t.__esModule=!0;var r,s=n("c/Tr"),a=(r=s)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},JaXw:function(e,t){},Qu52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Q5Hn"),s=n("mvHQ"),a=n.n(s),u=n("Xxa5"),i=n.n(u),o=n("exGp"),c=n.n(o),d=n("aL0L"),_=n("lPj9"),l=n("isQH"),v=n("1Qta"),f=n("qzOj"),m=n("7qUZ"),h={components:{LoadingSmall:m.a},props:{user:{type:Object},code:{type:String}},name:"",data:function(){return{usd_recommend:0,usd_active_house:0,usd_team_layer:0,res:0,completed:!1}},mounted:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.showRes();case 2:case"end":return t.stop()}},t,e)}))()},methods:{showRes:function(){var e=this;return c()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.completed=!1,"usd_recommend"!=e.code){t.next=8;break}return t.next=4,Object(l.a)(e.user);case 4:n=t.sent,e.res=n[0]+", "+n[1]+", "+n[2],t.next=21;break;case 8:if("usd_active_house"!=e.code){t.next=14;break}return t.next=11,Object(v.a)(e.user);case 11:e.res=t.sent,t.next=21;break;case 14:if("usd_team_layer"!=e.code){t.next=20;break}return t.next=17,Object(f.a)(e.user);case 17:e.res=t.sent,t.next=21;break;case 20:e.res=0;case 21:e.completed=!0;case 22:case"end":return t.stop()}},t,e)}))()},getUsd:function(){var e=this;return c()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(e.user);case 2:return e.usd_recommend=t.sent,t.next=5,Object(v.a)(e.user);case 5:return e.usd_active_house=t.sent,e.usd_team_layer=Object(f.a)(e.user),n={usd_recommend:e.usd_recommend,usd_team_layer:e.usd_team_layer,usd_active_house:e.usd_active_house},e.user.bonus=n,t.abrupt("return",n);case 10:case"end":return t.stop()}},t,e)}))()}}},p={render:function(){var e=this.$createElement,t=this._self._c||e;return this.completed?t("div",[this._v("\n    "+this._s(this.res)+"\n")]):t("loading-small")},staticRenderFns:[]};var b=n("VU/8")(h,p,!1,function(e){n("JaXw")},"data-v-51e1f2f0",null).exports,x=n("DBJ4"),g=x.a.NAMESPACE.simpler,y=(x.a.NAMESPACE.leader,x.a.VIPS_SIMPLER),w=x.a.VIPS_LEADER,C=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e.join("_"):e.split("_")},E=function(e){return e[0]==g?y[e[1]-1]:w[e[1]-1]},S=function(e,t){var n,r=void 0,s=void 0;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{s=t.toString().split(".")[1].length}catch(e){s=0}return(e*(n=Math.pow(10,Math.max(r,s)))+t*n)/n},j={components:{UnitBonus:b},props:{the_item:{type:Object},allow:{type:Boolean}},name:"",mounted:function(){},data:function(){return{}},computed:{total:function(){var e=S(this.the_item.usd_recommend,this.the_item.usd_active_house);return S(e,this.the_item.usd_team_layer)}},methods:{vip_code_to_name:function(e){return e=C(e),E(e).name}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-inline"},[n("div",{staticClass:"tree-table-content ttc-ar",class:{"tree-root":e.the_item.index<2}},[n("div",{staticClass:"level tree-col"},[e._v("\n            "+e._s(e.vip_code_to_name(e.the_item.vip))+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_recommend tree-col"},[e._v("\n            "+e._s(e.the_item.usd_recommend)+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_active_house tree-col"},[e._v("\n            "+e._s(e.the_item.usd_active_house)+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_team_layer tree-col"},[e._v("\n            "+e._s(e.the_item.usd_team_layer)+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_leader_management tree-col"},[e._v("\n            0\n        ")]),e._v(" "),n("div",{staticClass:"usd_leader_devlopment tree-col"},[e._v("\n            0\n        ")]),e._v(" "),n("div",{staticClass:"usd_sale_commission tree-col"},[e._v("\n            0\n        ")]),e._v(" "),n("div",{staticClass:"usd_result tree-col"},[e._v("\n            "+e._s(e.total)+"\n        ")])])])},staticRenderFns:[]};var k=n("VU/8")(j,A,!1,function(e){n("qo1/")},"data-v-71526b1e",null).exports,M=n("ClHd"),U={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clearfix fs-15 fw-b header-bg"},[n("div",{staticClass:"table-header clearfix f-l",staticStyle:{width:"15%"}},[n("div",{staticClass:"username"},[e._v("\n                User Unid\n            ")])]),e._v(" "),n("div",{staticClass:"table-header clearfix f-l",staticStyle:{width:"85%"}},[n("div",{staticClass:"level"},[e._v("\n                支付级别\n            ")]),e._v(" "),n("div",{staticClass:"usd_recommend"},[e._v("\n                首购直接"),n("br"),e._v("\n                推荐奖金\n            ")]),e._v(" "),n("div",{staticClass:"usd_active_house"},[e._v("\n                活跃分店消费奖励"),n("br"),e._v("\n                @ 130USD\n            ")]),e._v(" "),n("div",{staticClass:"usd_team_layer"},[e._v("\n                团队奖金\n            ")]),e._v(" "),n("div",{staticClass:"usd_leader_management"},[e._v("\n                领袖分红"),n("br"),e._v("（管理奖金）\n            ")]),e._v(" "),n("div",{staticClass:"usd_leader_devlopment"},[e._v("\n                领袖分红"),n("br"),e._v("（发展奖金）\n            ")]),e._v(" "),n("div",{staticClass:"usd_sale_commission"},[e._v("\n                零售佣金\n            ")]),e._v(" "),n("div",{staticClass:"usd_result"},[e._v("\n                Total\n            ")])])])}]};var L,O=n("VU/8")({name:"",data:function(){return{}}},U,!1,function(e){n("tMSU")},"data-v-3168f0f2",null).exports,R=n("Dd8w"),N=n.n(R),P=n("Mh3b"),I=x.a.NAMESPACE,T=(L=c()(i.a.mark(function e(t,n,r,s){var a,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},null!=r&&"usd_recommend"!=r){e.next=7;break}return e.next=4,Object(l.a)(t);case 4:u=e.sent,s&&(u=P.a.floatAdd(u[2],P.a.floatAdd(u[0],u[1]))),a[I.usd_recommend]=u;case 7:if(null!=r&&"usd_active_house"!=r){e.next=11;break}return e.next=10,Object(v.a)(t);case 10:a[I.usd_active_house]=e.sent;case 11:if(null!=r&&"usd_team_layer"!=r){e.next=15;break}return e.next=14,Object(f.a)(t);case 14:a[I.usd_team_layer]=e.sent;case 15:t[I.bonus]=a,n(t),P.a.judge_has_children(t)&&t[I.children].map(function(e){T(e,n,r,s)});case 18:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return L.apply(this,arguments)}),$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];console.time("Bonus"),T(e,t,n,r),console.timeEnd("Bonus")},V={components:{LoadingSmall:m.a},props:{user_s:{type:Array},user_e:{type:Array}},name:"",data:function(){return{loading:!1,bonus:[]}},mounted:function(){this.getBonus()},methods:{getBonus:function(){var e=this;return c()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.conn.get(e.api.bonus,e.$store.state.token);case 2:(n=t.sent)&&(e.bonus=n.map(function(e){return{id:e.id,user:e.user.id}}));case 4:case"end":return t.stop()}},t,e)}))()},netoSave_enroller:function(e){var t=this;return c()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={usd_recommend:e.bonus.usd_recommend},t.bonus.map(function(t){t.user==e.id&&(r.bonus=t.id)}),n.next=4,t.conn.put(t.api.bonus+"/"+r.bonus,t.$store.state.token,r);case 4:n.sent;case 5:case"end":return n.stop()}},n,t)}))()},netoSave_sponser:function(e){var t=this;return c()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=N()({},e.bonus,{vip:e.vip.type+"_"+e.vip.star}),t.bonus.map(function(t){t.user==e.id&&(r.bonus=t.id)}),n.next=4,t.conn.put(t.api.bonus+"/"+r.bonus,t.$store.state.token,r);case 4:n.sent;case 5:case"end":return n.stop()}},n,t)}))()},num:function(){var e=this;this.loading=!0,this.user_s.map(function(t){return $(t,e.netoSave_sponser),t}),this.user_e.map(function(t){$(t,e.netoSave_enroller,"usd_recommend")}),setTimeout(function(){e.loading=!1,e.$emit("finished_Father")},600)}}},B={render:function(){var e=this.$createElement,t=this._self._c||e;return this.loading?t("span",[this._v("\n    等待\n")]):t("span",{on:{click:this.num}},[this._v("\n    同步\n")])},staticRenderFns:[]};var F=n("VU/8")(V,B,!1,function(e){n("qWNf")},"data-v-78df4dc5",null).exports,D={components:{ArTreeItem:k,NameLabel:M.a,ArTreeHeader:O,SyncBonus:F},name:"",data:function(){return{users_sponser:null,users_enroller:null,show:!1,can_num:!1,bonuses:[]}},mounted:function(){this.user(),this.bonusesLoading()},methods:{bonusesLoading:function(){var e=this;return c()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.conn.get(e.api.bonus,e.$store.state.token);case 2:(n=t.sent)&&(e.bonuses=n);case 4:case"end":return t.stop()}},t,e)}))()},user:function(){var e=this;return c()(i.a.mark(function t(){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)(e.$store.state.user_unit,"SPONSER");case 2:return(n=t.sent)&&(e.users_sponser=JSON.parse(a()(n)),Object(d.a)(e.users_sponser)),t.next=6,Object(_.a)(e.$store.state.user_unit,"ENROLLER");case 6:(r=t.sent)&&(e.users_enroller=JSON.parse(a()(r)),Object(d.a)(e.users_enroller)),e.show=!0;case 9:case"end":return t.stop()}},t,e)}))()},async_finished:function(){var e=this;this.show=!1,setTimeout(function(){e.show=!0},300)}}},J={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{attrs:{color:"primary ml-2 mb-3"}},[n("sync-bonus",{attrs:{user_s:e.users_sponser,user_e:e.users_enroller},on:{finished_Father:e.async_finished}})],1),e._v(" "),n("ar-tree-header")],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[e.show?n("v-treeview",{staticClass:"mt-0 the-tree ar-tree fs-14",attrs:{"multiple-active":"",transition:"",dense:"","off-icon":"",items:e.bonuses,"open-all":"",open:[0,1]},scopedSlots:e._u([{key:"label",fn:function(e){var t=e.item,r=e.open;return[n("name-label",{attrs:{the_item:t.user,op:r,space:"unid",need_tree:!1}})]}},{key:"append",fn:function(t){var r=t.item,s=t.open;return[n("ar-tree-item",{ref:"treeItem",attrs:{allow:e.can_num,the_item:r,o:s}})]}}],null,!1,774871104)}):e._e()],1)],1)],1)},staticRenderFns:[]};var q=n("VU/8")(D,J,!1,function(e){n("rLaI")},"data-v-6de7c71d",null).exports,H=n("n7zJ"),Q={components:{TreeListLayout:r.a,AccountResultData:q,Loading:H.a,SyncBonus:F},name:"",data:function(){return{}}},G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("tree-list-layout",[t("div",{attrs:{slot:"title"},slot:"title"},[this._v("會計結算\n    ")]),this._v(" "),this.$store.state.user_unit?t("account-result-data",{attrs:{slot:"content"},slot:"content"}):t("loading",{attrs:{slot:"content"},slot:"content"})],1)},staticRenderFns:[]};var X=n("VU/8")(Q,G,!1,function(e){n("iiPA")},"data-v-0f9de21d",null);t.default=X.exports},acM9:function(e,t){},iiPA:function(e,t){},isQH:function(e,t,n){"use strict";var r,s=n("Xxa5"),a=n.n(s),u=n("exGp"),i=n.n(u),o=n("Gu7T"),c=n.n(o),d=n("//Fk"),_=n.n(d),l=n("Mh3b"),v=n("DBJ4"),f=v.a.NAMESPACE,m=(v.a.CAN_USER_PV_LIMIT,function(e){return!!(e[f.buys]&&e[f.buys].length>=0)}),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.children;return new _.a(function(n,r){var s=[],a=[],u=[];l.a.judge_has_children(e)&&e[t].map(function(e){if(l.a.judge_has_children(e)){var n=e[t];n.map(function(e){l.a.judge_has_children(e)&&s.push.apply(s,c()(e[t]))}),a.push.apply(a,c()(n))}u.push(e)});n({user_1:u,user_2:a,user_3:s})})},p=function(e,t){return[e[0]*t[0],e[1]*t[1],e[2]*t[2]]},b=function(e,t,n,r){var s=[0,0,0];return new _.a(function(a,u){l.a.numd_pv(e)>.5&&(t.map(function(e){m(e)&&e[f.is_new]&&(s[0]+=l.a.numd_pv(e))}),n.map(function(e){m(e)&&e[f.is_new]&&(s[1]+=l.a.numd_pv(e))}),r.map(function(e){m(e)&&e[f.is_new]&&(s[2]+=l.a.numd_pv(e))})),a(s)})},x=(r=i()(a.a.mark(function e(t){var n,r,s,u,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.2,.1,.05];return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:if(n=e.sent,r=n.user_1,s=n.user_2,u=n.user_3,i=[],!u){e.next=12;break}return e.next=10,b(t,r,s,u);case 10:i=e.sent,i=p(i,o);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)});t.a=x},qWNf:function(e,t){},"qo1/":function(e,t){},qzOj:function(e,t,n){"use strict";var r=n("//Fk"),s=n.n(r),a=n("Mh3b"),u=n("DBJ4"),i=u.a.NAMESPACE,o=(u.a.CAN_USER_PV_LIMIT,function(e,t){return a.a.floatMul(e,t)}),c=function(e,t){return a.a.floatAdd(e,t)};t.a=function(e){var t=0;return new s.a(function(n,r){var s=e.vip.ratio.filter(function(e){return 0!=e});e=function e(t,n,r){var s=[];return n+=1,t.map(function(t){var u={},o=[];return a.a.judge_has_children(t)&&(o=e(t[i.children],n,r)),u.name=t.name,u[i.ipv]=t[i.ipv],u[i.vip]=t[i.vip],u[i.index]=t[i.index],o.length>0&&(u[i.children]=o),s.push(u),u}),s}([e],0,s)[0],a.a.judge_has_children(e)&&(t=function e(t,n,r,s){var d=0,_=s[r];return void 0==_&&(_=0),t.map(function(t){var l=0;if(r<u.a.LAYER_DEPTH_NUM){t[i.usd_layer]=o(o(_,t[i.ipv]),r+1);var v=t[i.ipv]+n,f=r+1;a.a.judge_number(v,u.a.CAN_USER_PV_LIMIT)?v=0:f-=1,a.a.judge_has_children(t)&&(l=e(t[i.children],v,f,s))}else t[i.usd_layer]=0;return d=c(d,c(t[i.usd_layer],l)),t}),d}(e[i.children],0,0,e[i.vip][i.ratio])),n(t)})}},rLaI:function(e,t){},tMSU:function(e,t){}});
//# sourceMappingURL=2.99f3813708880a58bd4c.js.map