webpackJsonp([6],{"0Q4m":function(e,t){},"3KgQ":function(e,t){},IIpk:function(e,t,n){"use strict";var s={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"loading"})},staticRenderFns:[]};var r=n("VU/8")({name:""},s,!1,function(e){n("0Q4m")},"data-v-07c71c36",null);t.a=r.exports},KJEO:function(e,t){},Q5Hn:function(e,t,n){"use strict";var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{fluid:""}},[t("v-row",[t("v-col",{attrs:{col:"12"}},[t("div",{staticClass:"title pl-4 pt-2"},[this._t("title")],2)])],1),this._v(" "),t("v-row",[t("v-col",{staticClass:"px-5 pt-1"},[this._t("content")],2)],1),this._v(" "),t("v-row",[t("v-col",{staticClass:"pxx-5"},[this._t("extra")],2)],1)],1)},staticRenderFns:[]};var r=n("VU/8")({name:"",data:function(){return{}}},s,!1,function(e){n("Z8Bq")},"data-v-6c756669",null);t.a=r.exports},Qu52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Q5Hn"),r=n("mvHQ"),a=n.n(r),i=n("Xxa5"),o=n.n(i),u=n("exGp"),c=n.n(u),l=[.07,.06,.05,.03,.02],_={index:"index",bonus:"bonus",named:"named",user_id:"user",product_id:"product",unid:"unid",sponser_id:"sponser_id",enroller_id:"enroller_id",is_new:"is_new",children:"children",buys:"buys",pv:"pv",num:"num",ipv:"ipv",son_pv:"son_pv",son_can_num:"son_can_num",ratio:"ratio",vip:"vip",usd_layer:"usd_layer",son_usd:"son_usd",leader:"leader",simpler:"simpler",display_name:"displayname",usd_recommend:"usd_recommend",usd_team_layer:"usd_team_layer",usd_active_house:"usd_active_house"},d={NAMESPACE:_,CAN_USER_PV_LIMIT:100,LAYER_DEPTH_NUM:7,ACTIVE_MEMBER_NUM:3,ACTIVE_USD:130,ACTIVE_LAYER_RATIOS:{simpler:[[l[0],0,0,0,0,0,0],[l[0],l[1],0,0,0,0,0],[l[0],l[1],l[1],0,0,0,0],[l[0],l[1],l[1],l[2],0,0,0],[l[0],l[1],l[1],l[2],l[2],0,0]],leader:[[l[0],l[1],l[1],l[2],l[2],l[3],0],[l[0],l[1],l[1],l[2],l[2],l[3],l[4]],[l[0],l[1],l[1],l[2],l[2],l[3],l[4]],[l[0],l[1],l[1],l[2],l[2],l[3],l[4]],[l[0],l[1],l[1],l[2],l[2],l[3],l[4]]]},VIPS_SIMPLER:[{name:"一级会员",type:_.simpler,star:1},{name:"二级会员",type:_.simpler,star:2},{name:"三级会员",type:_.simpler,star:3},{name:"四级会员",type:_.simpler,star:4},{name:"五级会员",type:_.simpler,star:5}],VIPS_LEADER:[{name:"一星领袖",type:_.leader,star:1},{name:"二星领袖",type:_.leader,star:2},{name:"三星领袖",type:_.leader,star:3},{name:"四星领袖",type:_.leader,star:4},{name:"五星领袖",type:_.leader,star:5}]},v=d.NAMESPACE.simpler,p=d.NAMESPACE.leader,m={name:"普通成员",type:v,star:0,ratio:[0]},f=d.VIPS_SIMPLER,h=d.VIPS_LEADER,b=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=m;return e==p?h.map(function(e){e.star==t&&(s=e)}):f.map(function(e){e.star==t&&(s=e)}),n&&t>0&&(s.ratio=function(e,t){var n=t-1;return d.ACTIVE_LAYER_RATIOS[e][n]}(e,t)),s},y=function(e,t,n){var s=v,r=1;return e<100?r=0:n>2e3&&t>=2&&e+n>=5e3?(r=function(e,t,n){var s=e+n,r=3;return t>4&&s>25e3&&n>5e3?t>=6&&s>=15e4&&n>=25e3?r=5:t>=5&&s>=72e3&&n>=9e3&&(r=4):(t<4||s<25e3||n<5e3)&&(r=t>=3&&s>=9e3&&n>=3e3?2:1),r}(e,t,n),s=p):r=function(e,t,n){var s=e+n,r=3;return s>1e3?s>=3e3?r=5:s>=2e3&&(r=4):s<1e3&&(r=s<500?1:2),r}(e,0,n),b(s,r)},E=function(e,t){var n,s=void 0,r=void 0;try{s=e.toString().split(".")[1].length}catch(e){s=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return(e*(n=Math.pow(10,Math.max(s,r)))+t*n)/n},C=d.NAMESPACE,x=function(e,t){return e>=t},S=function(e){return C.children in e&&e[C.children].length>0},g=function(e){var t=0;return e[C.buys]&&e[C.buys].length>=0&&e[C.buys].map(function(e){return t+=e[C.num]*e[C.pv],e}),t},A=function(e,t){return x(e,t)?1:0},w=d.NAMESPACE,R=d.CAN_USER_PV_LIMIT,P=function e(t){var n={num:0,pv:0},s=0,r=0;return t.map(function(t){var a={num:0,pv:0};s=g(t),r=A(s,R),S(t)&&(a=e(t[w.children])),t[w.ipv]=s,t[w.son_pv]=a.pv,t[w.son_can_num]=a.num,t[w.vip]=y(s,a.num,a.pv),n.pv+=a.pv+s,n.num+=a.num+r,t.show=!0}),n},L=function(e,t){S(e)?P([e]):P(e)},I=n("//Fk"),$=n.n(I),N=d.NAMESPACE,k=function e(t,n,s){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=[];return r+=1,t.map(function(i){if(i[s]==n){var o=i[N.unid];i[N.children]=e(t,o,s,r),i[N.index]=r,a.push(i)}}),a},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new $.a(function(s,r){s(k(e,n,"SPONSER"==t?N.sponser_id:N.enroller_id))})},V=d.NAMESPACE.simpler,U=(d.NAMESPACE.leader,d.VIPS_SIMPLER),O=d.VIPS_LEADER,T=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e.join("_"):e.split("_")},F=function(e){var t="";if(e[0]==V){if(0==e[1])return t;t=U[e[1]-1]}else t=O[e[1]-1];return t},B={components:{},props:{the_item:{type:Object},allow:{type:Boolean}},name:"",mounted:function(){},data:function(){return{}},computed:{total:function(){var e=E(this.the_item.usd_recommend,this.the_item.usd_active_house);return E(e,this.the_item.usd_team_layer)}},methods:{vip_code_to_name:function(e){return e?(e=T(e),F(e).name):"無結果"},goCenter:function(){this.$store.commit("saveUser",this.the_item.user),this.$store.commit("saveBonus",this.the_item),this.$router.push({path:"/home/account/statement",query:{user_id:this.the_item.user.id}})}}},D={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-inline"},[n("div",{staticClass:"tree-table-content ttc-ar",class:{"tree-root":e.the_item.index<2}},[n("div",{staticClass:"account_empty text-left tree-col",domProps:{innerHTML:e._s(e.the_item.user.username)}}),e._v(" "),n("div",{staticClass:"ipv tree-col"},[e._v("\n            "+e._s(e.vip_code_to_name(e.the_item.vip))+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_recommend tree-col"},[e._v("\n            "+e._s(e.the_item.usd_recommend)+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_active_house tree-col"},[e._v("\n            "+e._s(e.the_item.usd_active_house)+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_team_layer tree-col"},[e._v("\n            "+e._s(e.the_item.usd_team_layer)+"\n        ")]),e._v(" "),n("div",{staticClass:"usd_leader_management tree-col"},[e._v("\n            0\n        ")]),e._v(" "),n("div",{staticClass:"usd_leader_devlopment tree-col"},[e._v("\n            0\n        ")]),e._v(" "),n("div",{staticClass:"usd_sale_commission tree-col"},[e._v("\n            0\n        ")]),e._v(" "),n("div",{staticClass:"ipv tree-col"},[e._v("\n            "+e._s(e.total)+"\n        ")]),e._v(" "),n("div",{staticClass:"option"},[n("v-btn",{staticClass:"ma-0 pa-1 btn-item-icon text-center",attrs:{fab:"",icon:"","x-small":"",color:"primary"},on:{click:e.goCenter}},[n("v-icon",[e._v("\n                    mdi-chevron-right\n                ")])],1)],1)])])},staticRenderFns:[]};var H=n("VU/8")(B,D,!1,function(e){n("uNSH")},"data-v-5c45f27f",null).exports,J={props:{the_item:{type:Object},space:{type:String,default:"username"},need_tree:{type:Boolean,default:!0}},name:"",data:function(){return{}}},Q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"username",class:{"tree-root":e.the_item.index<2,"text-center":!e.need_tree}},[e._l(e.the_item.index,function(t){return n("div",{key:t,class:{"level-space":e.need_tree}})}),e._v(" "),n("div",{staticClass:"inner-name d-inline"},[e._v(e._s(e.the_item[e.space]))])],2)},staticRenderFns:[]};var z=n("VU/8")(J,Q,!1,function(e){n("nKPm")},"data-v-120032cc",null).exports,K={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clearfix fs-14 fw-b header-bg"},[n("div",{staticClass:"table-header clearfix f-l",staticStyle:{width:"15%"}},[n("div",{staticClass:"username"},[e._v("\n                會員號碼\n            ")])]),e._v(" "),n("div",{staticClass:"table-header clearfix f-l",staticStyle:{width:"85%"}},[n("div",{staticClass:"account_empty text-left"},[e._v("\n                用戶名\n            ")]),e._v(" "),n("div",{staticClass:"ipv"},[e._v("\n                支付級別\n            ")]),e._v(" "),n("div",{staticClass:"usd_recommend"},[e._v("\n                首購直接"),n("br"),e._v("\n                推薦獎金\n            ")]),e._v(" "),n("div",{staticClass:"usd_active_house"},[e._v("\n                活躍分店消費獎勵"),n("br"),e._v("\n                @ 130USD\n            ")]),e._v(" "),n("div",{staticClass:"usd_team_layer"},[e._v("\n                團隊獎金\n            ")]),e._v(" "),n("div",{staticClass:"usd_leader_management"},[e._v("\n                領袖分紅"),n("br"),e._v("（管理獎金）\n            ")]),e._v(" "),n("div",{staticClass:"usd_leader_devlopment"},[e._v("\n                領袖分紅"),n("br"),e._v("（發展獎金）\n            ")]),e._v(" "),n("div",{staticClass:"usd_sale_commission"},[e._v("\n                零售傭金\n            ")]),e._v(" "),n("div",{staticClass:"ipv"},[e._v("\n                Total\n            ")]),e._v(" "),n("div",{staticClass:"option"},[e._v("\n                 \n            ")])])])}]};var j=n("VU/8")({name:"",data:function(){return{}}},K,!1,function(e){n("c0z0")},"data-v-d07ca7c4",null).exports,q=n("eu+i"),Y=n("n7zJ"),Z=n("IIpk"),G={components:{ArTreeItem:H,NameLabel:z,ArTreeHeader:j,SyncBonus:q.a,Loading:Y.a,LoadingHuge:Z.a},name:"",data:function(){return{users_sponser:null,users_enroller:null,show:!1,can_num:!1,bonuses:[]}},mounted:function(){this.theUser(),this.bonusesLoading()},methods:{theUser:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.users_sponser=e.$store.state.users_sponser,e.users_enroller=e.$store.state.users_enroller,e.show=!0;case 3:case"end":return t.stop()}},t,e)}))()},bonusesLoading:function(){var e=this;return c()(o.a.mark(function t(){var n,s,r,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.conn.get(e.api.bonus,e.$store.state.token,{chronu:e.$store.state.chronus.id,_sort:"published_at:ASC"});case 2:if(n=t.sent){for(e.bonuses=[],s=e.$store.state.transfer,r=0;r<s.length;r++)for(a=s[r],i=0;i<n.length;i++)a.unid==n[i].user.unid&&e.bonuses.push(n[i]);e.bonuses.length}case 4:case"end":return t.stop()}},t,e)}))()},user:function(){var e=this;return c()(o.a.mark(function t(){var n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e.$store.state.user_unit,"SPONSER");case 2:return(n=t.sent)&&(e.users_sponser=JSON.parse(a()(n)),L(e.users_sponser)),t.next=6,M(e.$store.state.user_unit,"ENROLLER");case 6:(s=t.sent)&&(e.users_enroller=JSON.parse(a()(s)),L(e.users_enroller)),e.show=!0;case 9:case"end":return t.stop()}},t,e)}))()},async_start:function(){this.bonuses=[]},async_finished:function(){location.reload()}}},X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-btn",{attrs:{color:"primary ml-2 mb-3"}},[n("sync-bonus",{attrs:{user_s:e.users_sponser,user_e:e.users_enroller},on:{start_Father:e.async_start,finished_Father:e.async_finished}})],1),e._v(" "),n("ar-tree-header")],1),e._v(" "),n("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[e.show?n("v-treeview",{staticClass:"mt-0 the-tree ar-tree fs-14",attrs:{"multiple-active":"",transition:"",dense:"","off-icon":"",items:e.bonuses,"open-all":"",open:[0,1]},scopedSlots:e._u([{key:"label",fn:function(e){var t=e.item,s=e.open;return[n("name-label",{attrs:{the_item:t.user,op:s,space:"number_code",need_tree:!1}})]}},{key:"append",fn:function(t){var s=t.item,r=t.open;return[n("ar-tree-item",{ref:"treeItem",attrs:{allow:e.can_num,the_item:s,o:r}})]}}],null,!1,736346695)}):e._e(),e._v(" "),e.bonuses.length<1?n("loading"):e._e()],1)],1)],1)},staticRenderFns:[]};var W=n("VU/8")(G,X,!1,function(e){n("KJEO")},"data-v-579c75ca",null).exports,ee={components:{TreeListLayout:s.a,AccountResultData:W,Loading:Y.a,SyncBonus:q.a},name:"",data:function(){return{}}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("tree-list-layout",[t("div",{attrs:{slot:"title"},slot:"title"},[this._v("會計結算\n    ")]),this._v(" "),this.$store.state.transfer?t("account-result-data",{attrs:{slot:"content"},slot:"content"}):t("loading",{attrs:{slot:"content"},slot:"content"})],1)},staticRenderFns:[]};var ne=n("VU/8")(ee,te,!1,function(e){n("RzJ5")},"data-v-fca2ac90",null);t.default=ne.exports},RzJ5:function(e,t){},Z8Bq:function(e,t){},c0z0:function(e,t){},"eu+i":function(e,t,n){"use strict";var s=n("Dd8w"),r=n.n(s),a=n("Xxa5"),i=n.n(a),o=n("exGp"),u=n.n(o),c={components:{LoadingSmall:n("7qUZ").a},props:{user_s:{type:Array},user_e:{type:Array}},name:"",data:function(){return{loading:!1,_bonus:[],transfer:[]}},mounted:function(){var e=this;return u()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.transfer=e.$store.state.transfer,t.next=3,e.getBonus();case 3:e._bonus=t.sent,e._bonus.length>0&&setTimeout(function(){e.syncData()},4e3);case 5:case"end":return t.stop()}},t,e)}))()},methods:{clear_data:function(e){delete e.chronu,delete e.createdAt,delete e.published_at,delete e.updatedAt,delete e.bonus},getBonus:function(){var e=this;return u()(i.a.mark(function t(){var n,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,e.conn.get(e.api.bonus,e.$store.state.token,{chronu:e.$store.state.chronus.id});case 3:return(s=t.sent)&&(n=s.map(function(e){return{id:e.id,user:e.user.id}})),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,e)}))()},netoSave_enroller:function(e){var t=this;return u()(i.a.mark(function n(){var s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s={usd_recommend:e.bonus.usd_recommend},t._bonus.map(function(t){t.user==e.id&&(s.bonus=t.id)}),n.next=4,t.conn.put(t.api.bonus+"/"+s.id,t.$store.state.token,s);case 4:if(!n.sent){n.next=7;break}return n.abrupt("return",!0);case 7:return n.abrupt("return",!1);case 8:case"end":return n.stop()}},n,t)}))()},netoSave_sponser:function(e){var t=this;return u()(i.a.mark(function n(){var s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=r()({},e.bonus,{vip:e.vip.name+"_"+e.vip.star,son_can_num_sponser:e.transfer.son_can_num_SPONSER,son_can_num_enroller:e.transfer.son_can_num_ENROLLER,son_pv_sponser:e.transfer.son_pv_SPONSER+"",son_pv_enroller:e.transfer.son_pv_ENROLLER+""}),t._bonus.map(function(t){t.user==e.id&&(s.bonus=t.id)}),t.clear_data(s),n.next=5,t.conn.put(t.api.bonus+"/"+s.id,t.$store.state.token,s);case 5:if(!n.sent){n.next=8;break}return n.abrupt("return",!0);case 8:return n.abrupt("return",!1);case 9:case"end":return n.stop()}},n,t)}))()},syncData:function(){var e=this;this.loading=!0,console.log(this.transfer),this.transfer.map(function(e){}),setTimeout(function(){e.loading=!1},4600)}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return this.loading?t("div",{staticClass:"pl-4 pr-4 async-content-fixed sub-header"},[t("v-icon",{staticClass:"circle-around d-inline-block",attrs:{size:"14"}},[this._v("mdi-loading")]),this._v(" "),t("div",{staticClass:"fs-12 d-inline-block"},[this._v("同步中...")])],1):t("span")},staticRenderFns:[]};var _=n("VU/8")(c,l,!1,function(e){n("3KgQ")},"data-v-34ec7aee",null);t.a=_.exports},nKPm:function(e,t){},uNSH:function(e,t){}});
//# sourceMappingURL=6.882bda64857112633dfc.js.map